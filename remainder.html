<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta content="origin" name="referrer">

    <style>
        .card {
            width: 400px;
            border: 5px solid green;
            padding: 10px;
            margin: 15px;
            float: left;
        }

        #card2 {
            background-color: rgb(95, 160, 226);
        }

        #remainder_card {
            background-color: rgb(223, 147, 71);
        }
    </style>

    <script>
        function calculate(cardid) {
            var result = 0;
            var cardElem = document.getElementById(cardid);
            var trailing_by_count = parseFloat(cardElem.querySelector('input[name="trailing_by_count"]').value);
            var remaining_uncounted = parseFloat(cardElem.querySelector('input[name="remaining_uncounted"]').value);
            var twon = 2.0 * remaining_uncounted;
            var trailn = trailing_by_count + remaining_uncounted;
            // result = (trailing_by_count + remaining_uncounted)/(2*remaining_uncounted);
            result = (trailn / twon) * 100.0;
            result = result.toFixed(2);
            var nvotes = trailing_by_count + (remaining_uncounted / 2) + 1;
            var resultsElem;
            resultsElem = cardElem.querySelector('span[name="result_share_n"]');
            resultsElem.innerHTML = '' + nvotes;
            resultsElem = cardElem.querySelector('span[name="result_share_p"]');
            resultsElem.innerHTML = '' + result;
            resultsElem = cardElem.querySelector('span[name="result_n1"]');
            resultsElem.innerHTML = '' + remaining_uncounted;
            resultsElem = cardElem.querySelector('span[name="result_n2"]');
            resultsElem.innerHTML = '' + remaining_uncounted;
        }

        function calculate2(cardid) {
            var result = 0;
            var cardElem = document.getElementById(cardid);
            var trailing_by_count = parseFloat(cardElem.querySelector('input[name="trailing_by_count"]').value);
            var predicted_win_percentage = parseFloat(cardElem.querySelector('input[name="predicted_win_percentage"]').value) / 100;
            var minimum_req_uncounted = Math.ceil((trailing_by_count) / ((2 * predicted_win_percentage) - 1));

            var resultsElem;
            resultsElem = cardElem.querySelector('span[name="minimum_req_uncounted"]');
            resultsElem.innerHTML = '' + minimum_req_uncounted;

            var known_uncounted = parseFloat(cardElem.querySelector('input[name="known_uncounted"]').value);

            var votes_remaining = known_uncounted - minimum_req_uncounted;
            var votes_for_subject = Math.ceil(predicted_win_percentage * votes_remaining);
            var votes_for_other = votes_remaining - votes_for_subject;
            var votes_lead_by = votes_for_subject - votes_for_other;

            resultsElem = cardElem.querySelector('span[name="votes_remaining"]');
            resultsElem.innerHTML = '' + votes_remaining;

            resultsElem = cardElem.querySelector('span[name="votes_for_subject"]');
            resultsElem.innerHTML = '' + votes_for_subject;

            resultsElem = cardElem.querySelector('span[name="votes_for_other"]');
            resultsElem.innerHTML = '' + votes_for_other;


            var votes_diff_text;

            if (votes_lead_by > 0) {
                votes_diff_text = ' LEAD ';
            } else if (votes_lead_by < 0) {
                votes_diff_text = ' TRAIL ';
                votes_lead_by = 0 - votes_lead_by;
            } else {
                votes_diff_text = ' TIE (NEITHER LEAD, NOR TRAIL) ';
            }
            resultsElem = cardElem.querySelector('span[name="lead_or_trail"]');
            resultsElem.innerHTML = '' + votes_diff_text;

            resultsElem = cardElem.querySelector('span[name="lead_or_trail_by"]');
            resultsElem.innerHTML = '' + votes_lead_by;
        }



    </script>

</head>

<body style="font-size: 20px;">

    <div class="card" id="remainder_card">
        <div name="calcform">
            <p>
                Number of votes that a candidate is trailing by : (E.g. Biden is trailing by 165000 votes behind Trump
                in PA)
            </p>
            <p>
                <input type="number" name="trailing_by_count" min="0" max="10000000000">
                </input>
            </p>
            <p>
                Votes To be Counted (E.g. PA still has about 801000 votes to be counted)
            </p>
            <p>
                <input type="number" name="remaining_uncounted" min="0" max="1000000000">
                </input>
            </p>
            <p>
                The Trailing Candidate should get at least the following percentage of the remaining uncounted votes.
            </p>
            <p>
            <div name="result">
                <span name="result_share_n">____</span> of the remaining <span name="result_n1">___</span>
                uncounted
                votes.
            </div>
            </p>
            <p>
                <span name="result_share_p">____</span> % of the remaining <span name="result_n2">___</span> uncounted
                votes.
            </p>
            <button type="button" onclick="calculate('remainder_card')">Calculate</button>
        </div>

    </div>

    <div class="card" id="card2">
        <p>
            Number of votes that a candidate is trailing by: (E.g. Biden is trailing by 165000 votes behind Trump in PA)
        </p>
        <p>
            <input type="number" name="trailing_by_count" min="0" max="10000000000">
            </input>
        </p>
        <p>
            Percentage of votes the trailing candidate is expected to win, of the remaining uncounted votes.
        </p>
        <p>
            <input type="number" name="predicted_win_percentage" min="0" max="100">
            </input>
        </p>

        <p>
            The trailing candidate needs at least the following number of uncounted votes.
        </p>
        <p>
            <span name="minimum_req_uncounted">____</span>
        </p>
        <button type="button" onclick="calculate2('card2')">Calculate</button>

        <p>
            Fill in the number of uncounted votes below, if you know.
        </p>
        <p>
            <input type="number" name="known_uncounted" min="0" max="1000000000">
            </input>
        </p>

        <p>
            Remaining Uncounted Votes: <span name="votes_remaining">_____</span>
            <br />
            Votes for the subject: <span name="votes_for_subject">_____</span>
            <br />
            Votes for the other: <span name="votes_for_other">____</span>
            <br />
            The trailing candidate will then <span name="lead_or_trail">____</span> by <span
                name="lead_or_trail_by">_____</span> votes.
        </p>
    </div>


</body>

</html>